<!DOCTYPE HTML>
<html>
    <head>
        <title>Movies Recommendation</title>
        <style>
            path {
                stroke: #fff;
                stroke-width: 0.3px;
            }

            path:hover {
                stroke: #eaeaea;
                stroke-width: 2px;
            }


            .stop-left {
                stop-color: #ebaaff; 
            }

            .stop-right {
                stop-color: #7f00c9; 
            }

            .filled {
                fill: url(#mainGradient);
                stroke: url(#mainGradient);
                stroke-width: 3px;
            }

        </style>
        <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
        <script src="//d3js.org/topojson.v1.min.js"></script>
    </head>
    <body>
        <div id="svg-container">MovieLens Reviewer Demographics</div>
        <script>

            var width = 960, height = 700;
            
            var svg = d3.select("body")
                        .append("svg")
                        .attr("width", width)
                        .attr("height", height);

            var colorScale = d3.scale.threshold()
                               .domain([1, 18, 25, 35, 45, 50, 56])
                               .range(["#ebaaff", "#db93ff", "#d27aff", "#c24efc", "#bd3aff", "#aa00ff", "#9c00ea", "#7f00c9"]);
            
            var svgDefs = svg.append("defs");

            var gradient = svgDefs.append("linearGradient").attr('id', 'mainGradient');
            gradient.append("stop").attr('class', 'stop-left').attr('offset', '0');
            gradient.append("stop").attr('class', 'stop-right').attr('offset', '1');
            
            var path = d3.geo.path();

            d3.csv("ml-1m/users.csv", function(error, userDemo) {
                
            });

            d3.json("usa-topo.json", function(error, usa) {
                var geojson = topojson.feature(usa, usa.objects.tracts);
                svg.selectAll("path")
                    .data(geojson.features)
                    .enter().append("path")
                    .attr("class", function(d) {return "state " + d.properties.STUSPS}) //NAME
                    .attr("fill", function (d) {
                        return colorScale(Math.random(0, 60) * 100);
                    })
                    .attr("d", path)
            });

            svg.append('rect')
                .classed('filled', true)
                .attr('x', width - 200)
                .attr('y', height - 150)
                .attr('width', 180)
                .attr('height', 20); 

        </script>
    </body>
</html>